exports = async function(assemblies){
  const serviceName = "mongodb-atlas";
  const dbName = "HrDataDev";

  const db = context.services.get(serviceName).db(dbName);
  const collection = db.collection("calibMotorsConfiguration");

  const assemblyNameMap = assemblies.reduce((acc, assembly) => ({...acc, [assembly]: null}), {})

  // Find description names from configurations
  try {
    const configurations = (await collection.find({ assembly: { $in: assemblies } }).toArray());
    configurations.forEach((config) => {
      assemblyNameMap[config.assembly] = config.descriptionName
    });
  } catch(err) {
    console.log("Error occurred while getting configurations:", err.message);
    return { error: err.message };
  }
  
  return { result: assemblyNameMap };
};